(()=>{"use strict";var t={771:(t,i,e)=>{e.d(i,{Z:()=>a});var o=e(81),n=e.n(o),r=e(645),s=e.n(r)()(n());s.push([t.id,"* {\r\n    box-sizing: border-box;\r\n}\r\n\r\nhtml,\r\nbody {\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    min-height: 100dvh;\r\n}\r\n\r\n.container {\r\n    position: relative;\r\n}\r\n\r\n.score {\r\n    position: absolute;\r\n    color: white;\r\n    margin: .5rem 0 0 0.5rem;\r\n    font-family: 'Courier New', Courier, monospace;\r\n    font-weight: bold;\r\n    font-size: large\r\n}\r\n",""]);const a=s},645:t=>{t.exports=function(t){var i=[];return i.toString=function(){return this.map((function(i){var e="",o=void 0!==i[5];return i[4]&&(e+="@supports (".concat(i[4],") {")),i[2]&&(e+="@media ".concat(i[2]," {")),o&&(e+="@layer".concat(i[5].length>0?" ".concat(i[5]):""," {")),e+=t(i),o&&(e+="}"),i[2]&&(e+="}"),i[4]&&(e+="}"),e})).join("")},i.i=function(t,e,o,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(s[h]=!0)}for(var p=0;p<t.length;p++){var c=[].concat(t[p]);o&&s[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),e&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=e):c[2]=e),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),i.push(c))}},i}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var i=[];function e(t){for(var e=-1,o=0;o<i.length;o++)if(i[o].identifier===t){e=o;break}return e}function o(t,o){for(var r={},s=[],a=0;a<t.length;a++){var h=t[a],p=o.base?h[0]+o.base:h[0],c=r[p]||0,u="".concat(p," ").concat(c);r[p]=c+1;var l=e(u),d={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==l)i[l].references++,i[l].updater(d);else{var f=n(d,o);o.byIndex=a,i.splice(a,0,{identifier:u,updater:f,references:1})}s.push(u)}return s}function n(t,i){var e=i.domAPI(i);return e.update(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap&&i.supports===t.supports&&i.layer===t.layer)return;e.update(t=i)}else e.remove()}}t.exports=function(t,n){var r=o(t=t||[],n=n||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=e(r[s]);i[a].references--}for(var h=o(t,n),p=0;p<r.length;p++){var c=e(r[p]);0===i[c].references&&(i[c].updater(),i.splice(c,1))}r=h}}},569:t=>{var i={};t.exports=function(t,e){var o=function(t){if(void 0===i[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}},216:t=>{t.exports=function(t){var i=document.createElement("style");return t.setAttributes(i,t.attributes),t.insert(i,t.options),i}},565:(t,i,e)=>{t.exports=function(t){var i=e.nc;i&&t.setAttribute("nonce",i)}},795:t=>{t.exports=function(t){var i=t.insertStyleElement(t);return{update:function(e){!function(t,i,e){var o="";e.supports&&(o+="@supports (".concat(e.supports,") {")),e.media&&(o+="@media ".concat(e.media," {"));var n=void 0!==e.layer;n&&(o+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),o+=e.css,n&&(o+="}"),e.media&&(o+="}"),e.supports&&(o+="}");var r=e.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),i.styleTagTransform(o,t,i.options)}(i,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)}}}},589:t=>{t.exports=function(t,i){if(i.styleSheet)i.styleSheet.cssText=t;else{for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(document.createTextNode(t))}}}},i={};function e(o){var n=i[o];if(void 0!==n)return n.exports;var r=i[o]={id:o,exports:{}};return t[o](r,r.exports,e),r.exports}e.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},e.d=(t,i)=>{for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),e.nc=void 0;var o={};(()=>{e.d(o,{Z:()=>_,o:()=>A});var t,i=function(){function t(t,i,e,o){this.position=t,this.v=i,this.radius=1,this.markedForDeletion=!1,this.height=o||0,this.width=e||0}return t.prototype.update=function(){},t.prototype.draw=function(t){},t}(),n=(t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)},function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=function(t){function i(i,e){return t.call(this,i,e)||this}return n(i,t),i.prototype.update=function(){this.position.x+=this.v.x,this.position.y+=this.v.y,this.position.y+this.radius<0&&(this.markedForDeletion=!0)},i.prototype.draw=function(t){t.strokeStyle="violet",t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),t.stroke(),t.closePath()},i}(i),s=function(){function t(t){var i=this;this.v={x:0,y:0},this.position={x:0,y:0},this.image=new Image,this.image.src="./assets/player.png",this.image.onload=function(){i.width=.1*i.image.width,i.height=.1*i.image.height,i.position={x:(t.width-i.width)/2,y:t.height-i.height}},this.rotateDeg=0,this.projectiles=[],this.shootsPerSecond=6,this.shootingAvailable=!0,this.particles=[],this.health=3,this.markedForDeletion=!1}return t.prototype.update=function(t,i,e){var o=this;if(0===this.health)return this.markedForDeletion=!0;this.particles=this.particles.filter((function(t){return t.opacity>0&&t.update(),t.opacity>=0})),this.position.x+=this.v.x,this.position.y+=this.v.y,this.v={x:0,y:0},t.forEach((function(t){"KeyD"===t&&o.position.x+o.width<=i?(o.v.x=1,o.rotateDeg=30*Math.PI/180):"KeyA"===t&&o.position.x>=0?(o.v.x=-1,o.rotateDeg=-30*Math.PI/180):"KeyW"===t&&o.position.y>=0?o.v.y=-.5:"KeyS"===t&&o.position.y+o.height<=e?o.v.y=.5:"Space"===t&&o.shootingAvailable&&(o.shoot(),o.shootingAvailable=!1,setTimeout((function(){o.shootingAvailable=!0}),1/o.shootsPerSecond*1e3))})),-1===t.indexOf("KeyA")&&-1===t.indexOf("KeyD")&&(this.rotateDeg=0),this.projectiles.forEach((function(t,i){t.update()}))},t.prototype.draw=function(t){var i=this;t.save(),t.translate(this.position.x+this.width/2,this.position.y+this.height/2),t.rotate(this.rotateDeg),t.translate(-this.position.x-this.width/2,-this.position.y-this.height/2),t.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),t.restore(),this.projectiles.forEach((function(e,o){e.markedForDeletion&&i.projectiles.splice(o,1),e.draw(t)})),this.particles.forEach((function(i){return i.draw({ctx:t})}))},t.prototype.shoot=function(){this.projectiles.push(new r({x:this.position.x+this.width/2,y:this.position.y},{x:0,y:-3}))},t}(),a=function(){var t=this;this.keys=[],window.addEventListener("keydown",(function(i){i.repeat||"KeyW"!==i.code&&"KeyS"!==i.code&&"KeyA"!==i.code&&"KeyD"!==i.code&&"Space"!==i.code||-1!==t.keys.indexOf(i.code)||t.keys.push(i.code)})),window.addEventListener("keyup",(function(i){t.keys.includes(i.code)&&t.keys.splice(t.keys.indexOf(i.code),1)}))},h=function(){function t(t,i,e,o,n){this.position=t,this.v=i,this.radius=e,this.color=o,this.opacity=1,this.hasOpacity=void 0===n||n}return t.prototype.update=function(){this.position.x+=this.v.x,this.position.y+=this.v.y,this.hasOpacity&&(this.opacity-=.01)},t.prototype.draw=function(t){var i=t.ctx;i.save(),this.hasOpacity&&(i.globalAlpha=this.opacity),i.strokeStyle=this.color,i.beginPath(),i.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),i.fillStyle=this.color,i.fill(),i.closePath(),i.restore()},t}(),p=function(){var t=function(i,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},t(i,e)};return function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),c=function(t){function i(i,e,o,n){return t.call(this,i,e,o,n)||this}return p(i,t),i.prototype.update=function(){this.position.x+=this.v.x,this.position.y+=this.v.y,this.position.y+this.height>_.height&&(this.markedForDeletion=!0)},i.prototype.draw=function(t){t.fillStyle="red",t.fillRect(this.position.x,this.position.y,this.width,this.height)},i}(i),u=function(){function t(t,i){var e=this;this.position={x:0,y:0},this.image=new Image,this.image.src="./assets/enemy.png",this.image.onload=function(){e.width=1*e.image.width,e.height=1*e.image.height,e.position=t},this.projectiles=[],this.player=i,this.markedForDeletion=!1,this.particles=[]}return t.prototype.update=function(t){var i=this;this.position.x+=t.x,this.position.y+=t.y,this.player.projectiles.forEach((function(t,e){t.position.x>=i.position.x&&t.position.x<=i.position.x+i.width&&t.position.y>=i.position.y&&t.position.y<=i.position.y+i.player.height&&(A.score+=10,i.markedForDeletion=!0,i.player.projectiles[e].markedForDeletion=!0)})),this.projectiles.forEach((function(t,e){t.update();var o=t.position.x+t.width/2,n=t.position.y+t.height/2;if(o>=i.player.position.x&&o<=i.player.position.x+i.player.width&&n>=i.player.position.y&&n<=i.player.position.y+i.player.height){for(var r=0;r<20;r++)i.player.particles.push(new h({x:i.player.position.x+i.player.width/2,y:i.player.position.y+i.player.height/2},{x:2*(Math.random()-.5),y:2*(Math.random()-.5)},3*Math.random(),"white"));i.player.health-=1,t.markedForDeletion=!0}t.markedForDeletion&&i.projectiles.splice(e,1),i.particles.forEach((function(t){return t.update()}))}))},t.prototype.draw=function(t){t.drawImage(this.image,this.position.x,this.position.y,this.width,this.height),this.projectiles.forEach((function(i){i.draw(t)})),this.particles.forEach((function(i){return i.draw({ctx:t})}))},t.prototype.shoot=function(){this.projectiles.push(new c({x:this.position.x+this.width/2,y:this.position.y},{x:0,y:1},3,10))},t}(),l=function(){function t(t){this.position={x:0,y:0},this.v={x:1,y:0},this.enemies=[];for(var i=Math.floor(2*Math.random()+3),e=Math.floor(5*Math.random()+4),o=0;o<i;o++)for(var n=0;n<e;n++)this.enemies.push(new u({x:30*o,y:30*n},t));this.markedForDeletion=!1,this.shootFrame=0,this.particles=[]}return t.prototype.update=function(){var t=this;if(this.particles=this.particles.filter((function(t){return t.opacity>0&&t.update(),t.opacity>=0})),0===this.enemies.length)return this.markedForDeletion=!0;this.v.y=0,(this.enemies.at(-1).position.x+this.enemies[0].width>=_.width||this.enemies.at(0).position.x<0)&&(this.v.x*=-1,this.v.y+=30),this.enemies.forEach((function(i){i.update(t.v)})),this.position=this.enemies[0].position,this.position.y>_.height&&(this.markedForDeletion=!0),this.enemies=this.enemies.filter((function(i){if(i.markedForDeletion)for(var e=0;e<20;e++)t.particles.push(new h({x:i.position.x+i.width/2,y:i.position.y+i.height/2},{x:2*(Math.random()-.5),y:2*(Math.random()-.5)},3*Math.random(),"yellow"));return t.score+=10,!i.markedForDeletion})),this.shootFrame++,this.shootFrame%Math.floor(200*Math.random()+50)==0&&(this.enemies[Math.floor(Math.random()*this.enemies.length)].shoot(),this.shootFrame=0)},t.prototype.draw=function(t){this.enemies.forEach((function(i){i.draw(t)})),this.particles.forEach((function(i){return i.draw({ctx:t})}))},t}(),d=function(){function t(){this.input=new a,this.player=new s(_),this.vx=0,this.enemyGroups=[],this.frames=0,this.particles=[],this.isGameEnded=!1;for(var t=0;t<15;t++)this.particles.push(new h({x:Math.random()*_.width,y:Math.random()*_.height},{x:0,y:.3},2*Math.random(),"white",!1))}return t.prototype.update=function(){!0!==this.player.markedForDeletion&&(this.frames%(Math.floor(500*Math.random())+800)==0&&this.enemyGroups.push(new l(this.player)),this.player.update(this.input.keys,_.width,_.height),this.enemyGroups=this.enemyGroups.filter((function(t){return t.update(),0===t.enemies.length&&0===t.particles.length&&(A.score+=100),0!==t.enemies.length||0!==t.particles.length})),this.frames++,this.particles.forEach((function(t){t.position.y-t.radius>=_.height&&(t.position.x=Math.random()*_.width,t.position.y=-t.radius),t.update()})))},t.prototype.draw=function(t){!0!==this.player.markedForDeletion&&(this.player.draw(t),this.enemyGroups.forEach((function(i){i.draw(t)})),this.particles.forEach((function(i){return i.draw({ctx:t})})))},t}(),f=e(379),y=e.n(f),m=e(795),v=e.n(m),g=e(569),w=e.n(g),x=e(565),b=e.n(x),M=e(216),k=e.n(M),E=e(589),D=e.n(E),F=e(771),j={};j.styleTagTransform=D(),j.setAttributes=b(),j.insert=w().bind(null,"head"),j.domAPI=v(),j.insertStyleElement=k(),y()(F.Z,j),F.Z&&F.Z.locals&&F.Z.locals;var O=document.getElementById("canvas"),S=O.getContext("2d"),P=document.getElementById("score");const _=O;var A={score:0};O.height=500,O.width=O.height*(16/9);var I=new d,C=function(){requestAnimationFrame(C),S.fillStyle="black",S.fillRect(0,0,O.width,O.height),I.update(),I.draw(S),P.innerHTML=String(A.score)};C()})()})();